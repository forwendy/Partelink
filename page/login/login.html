<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui">
		<!--iphone-->
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no, email=no">
		<!--iphone-->
		<title>登录</title>
		<script>
		var deviceWidth = document.documentElement.clientWidth;
		if(deviceWidth > 750) deviceWidth = 750;
		document.documentElement.style.fontSize = deviceWidth / 7.5 + 'px';
		</script>
		<link rel="stylesheet" href="https://res.wx.qq.com/open/libs/weui/1.1.2/weui.min.css">
		<link rel="stylesheet" type="text/css" href="../../css/icon.css ">
		<link rel="stylesheet" type="text/css" href="../../css/common.css ">
		<style>
		.page-content{
			margin: 1.33rem 0.3rem 0;
		}
		.btn{
			margin-top: 0.6rem;
			margin-bottom: 0.2rem;
		}
		a{text-decoration: none;}
		</style>
	</head>
	<body>
		<div class="navigation">
			<a class="ico-back fl" onclick="history.go(-1);"></a>
			<h1>登录</h1>
		</div>
		<div class="page-content" id="app" v-cloak>
			<div class="form-group">
				<i class="ico-account fl"></i>
				<input v-model="account" type="text" placeholder="请输入手机号码或邮箱">
			</div>
			<div class="form-group">
				<i class="ico-password fl"></i>
				<a v-show="passwordFocus && password != ''" data-target="password" class="ico-del form-empty fr" v-on:click="removeAll"></a>
				<input v-model="password" type="password" placeholder="请设置密码" v-focus="passwordFocus" v-on:focus="passwordFocus = true" v-on:blur="passwordFocus = false">
			</div>
			<a class="btn" :class="{disabled: !isFinished}" v-on:click="submit">登录</a>
			<p class="fix" style="font-size: 13px;">
				<a class="fl" style="color: #999;" href="reset-password-tel.html">忘记密码？</a>
				<a class="fr" href="../register/register.html">注册账号</a>
			</p>
		</div>
		<!-- 兼容华为低版本浏览器 -->
		<script src="https://cdn.bootcss.com/babel-polyfill/6.23.0/polyfill.min.js"></script>
		<!-- 兼容华为低版本浏览器 -->
        <script src="../../js/vue.js"></script>
        <script src="../../js/vue.touch.js"></script>
        <script src="https://res.wx.qq.com/open/libs/weuijs/1.1.3/weui.min.js"></script>
        <script>
            var vapp = new Vue({
                el: '#app',
                data: {
                    account: '',
                    password: '',
                    passwordFocus: false
                },
                computed: {
                    isFinished: function () {
                        return this.account != '' && this.password != '';
                    }
                },
                methods: {
                	removeAll: function (e) {
                		var target = e.currentTarget.getAttribute('data-target');
                		this[target] = '';
                    	this.passwordFocus = true;
                	},
                    submit: function () {
                        if(this.isFinished){
							window.location.href = '../index.html';
                        }
                    }
                },
                directives: {
    				focus: {
      					update: function (el, {value}) {
        					if (value) {
          						el.focus()
        					}
      					}
    				}
  				}
            });
        </script>
	</body>
</html>
